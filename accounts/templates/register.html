{% extends "baseAcc.html" %}

{% block title %}Register a new user{% endblock %}

{% block content %}
<div class="container p-4">
  <button onclick="history.go(-1); return false;" class="btn btn-secondary float-end">Go back</button>
</div>
{% if form.errors %}
    <div class="error">
        <ul>
            {% for field, errors in form.errors.items %}
                <li>{{ field }}: {{ errors|join:", " }}</li>
            {% endfor %}
        </ul>
    </div>
{% endif %}
<div class="container">
  <h2 class="w-75 mx-auto">Register a new user</h2>
  <form method="POST">
    {% csrf_token %}
    <div class="row mb-3 w-75 mx-auto">
      <div class="col mb-3">
        <label for="role_field">User's relation to the School:</label><br>
          {{form.role}}<br>
      </div>
      {% comment %} <div class="col mb-3" id="student_id_field">
        <label for="student_id">Student ID:</label><br>
          {{ student_form.student_id }}
      </div>
      <div class="col mb-3" id="student_major_field">
        <label for="major">Major:</label><br>
          {{ student_form.major }}
      </div>
      <div class="col mb-3" id="teacher_id_field">
        <label for="teacher_id">Teacher ID:</label><br>
          {{ teacher_form.teacher_id }}
      </div>
      <div class="col mb-3" id="teacher_occupation_field">
        <label for="occupation">Occupation:</label><br>
          {{ teacher_form.occupation }}
      </div>{% endcomment %}
    {% comment %} </div>  {% endcomment %}
    {% comment %} <div class="row w-75 mx-auto"> {% endcomment %}
      <div class="col mb-3 ">
        <label for="username">Username:</label><br>
          {{form.username}}
      </div>
    </div>
    <div class="row w-75 mx-auto">
      <div class="col mb-3">
        <label for="pass1">Password:</label><br>
          {{form.password1}}
      </div>
      <div class="col mb-3">
        <label for="pass2">Password Confirmation:</label><br>
          {{form.password2}}
      </div>
    </div>
    <div class="row w-75 mx-auto">
      <div class="mb-3">
        <label for="email_field">Email:</label><br>
          {{form.email}}
      </div>
    </div>
    <div class="row w-75 mx-auto">
      <div class="col mb-3">
        <label for="first_name">First Name:</label><br>
          {{form.first_name}}
      </div>
      <div class="col mb-3">
        <label for="last_name">Last Name:</label><br>
          {{form.last_name}}
      </div>
    </div>
    <div class="row w-75 mx-auto">
      <div class="mb-3">
        <label for="phone_field">Phone Number:</label><br>
          {{form.phone_number}}
      </div>
    </div>
    <div class="row w-75 mx-auto">
      <div class="col mb-3">
        <label for="address">Address:</label><br>
        {{form.address}}
      </div>
    </div>
    <div class="row w-75 mx-auto">
      <div id="birthDate" class="col mb-3">
        <label for="birtdate">Birthdate:</label><br>
          {{form.birthdate}}
      </div>
    </div>
    <div class="mb-3 w-75 mx-auto">
      <br>
      <button type="submit" class="btn btn-primary">Register User</button>
    </div>
  </form>
</div>
<script>
  let role = document.querySelector('#id_role');
  let date = document.querySelector('#birthDate');
  let ageField = document.querySelector('#ageField');
  {% comment %} let studentFieldId = document.querySelector("#student_id_field");
  let studentMajorField = document.querySelector("#student_major_field");
  let teacherFieldId = document.querySelector('#teacher_id_field');
  let teacherOccupation = document.querySelector('#teacher_occupation_field'); {% endcomment %}

  role.addEventListener('input', (e) => {
    if (role.value === 'Student') {
      date.style.display = 'block';
      /*ageField.style.display = 'block';
      studentFieldId.style.display = 'block';
      studentMajorField.style.display = 'block';
      teacherFieldId.style.display = 'none';
      teacherOccupation.style.display = 'none';*/
    }
    else{
      date.style.display = 'none';
      ageField.style.display = 'none';
      /*studentFieldId.style.display = 'none';
      studentMajorField.style.display = 'none';
      teacherFieldId.style.display = 'block';
      teacherOccupation.style.display = 'block';*/
    }
  })

  /*let year = document.querySelector('#id_birthdate_year');
  let current_date = new Date();
  let current_year = current_date.getFullYear();
  let age = document.querySelector('#age_field');

  year.addEventListener('input', (e)=>{
    let calc_age = current_year - year.value;  
      age.value = calc_age;
  })*/

  
  {% comment %} let studentId = document.querySelector("#studentID");
  let id = document.querySelector("#id_field");

  studentId.addEventListener('input',(e)=>{
    temp = studentId.value;
    id.value = temp;
    console.log(studentId.value);
    console.log(id.value);
  })
   {% endcomment %}
</script>
{% endblock %}